(()=>{var e={};e.id=317,e.ids=[317],e.modules={2435:(e,t,r)=>{"use strict";function s(){return null}r.r(t),r.d(t,{default:()=>s})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9105:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(65239),n=r(48088),i=r(88170),o=r.n(i),a=r(30893),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d={children:["",{children:["(dashboard)",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43338)),"D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\(dashboard)\\notifications\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,2435)),"D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\(dashboard)\\notifications\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71934)),"D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\(dashboard)\\notifications\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(dashboard)/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25181:(e,t,r)=>{Promise.resolve().then(r.bind(r,65744))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29917:(e,t,r)=>{Promise.resolve().then(r.bind(r,43338))},33873:e=>{"use strict";e.exports=require("path")},43338:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NotificationPanel:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call NotificationPanel() from the server but NotificationPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\HK2\\Do an Banvexe HOST\\BookingTicketWebsite\\bus-ticket-admin\\app\\(dashboard)\\notifications\\page.tsx","NotificationPanel")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NotificationPanel:()=>p});var s=r(60687),n=r(43210),i=r(11860),o=r(24934),a=r(93437),l=r(39390),d=r(63974),c=r(96241),u=r(37826),x=r(81817),h=r(45275);let m=(e,t)=>e.length<=t?e:e.substring(0,t)+"...";function p({onClose:e}){let[t,r]=(0,n.useState)(!1),[p,f]=(0,n.useState)("all"),[b,g]=(0,n.useState)(null),[v,j]=(0,n.useState)([]),[k,y]=(0,n.useState)(!0),[w,N]=(0,n.useState)(null),P=v.filter(e=>{let r="staff"===e.target||"all"===e.target,s=!t||!e.read,n=new Date,i=!0;if("all"!==p){let t=e.createdAt;if("today"===p)i=t>=new Date(n.getFullYear(),n.getMonth(),n.getDate());else if("week"===p){let e=new Date(n);e.setDate(n.getDate()-7),i=t>=e}else"month"===p&&(i=t>=new Date(n.getFullYear(),n.getMonth(),1))}return r&&s&&i}),q=async e=>{g(e);try{await x.A.put(`${(0,h.$_)()}/notifications/${e.id}/read`,{},{withCredentials:!0}),j(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t))}catch(e){console.error("Error marking notification as read:",e)}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-end bg-black/50 md:items-center md:justify-center",onClick:e,children:(0,s.jsxs)("div",{className:"h-full w-full max-w-md overflow-auto bg-background p-4 shadow-lg md:h-auto md:max-h-[80vh] md:rounded-lg",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b pb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Th\xf4ng b\xe1o"}),(0,s.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:e,children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Đ\xf3ng"})]})]}),(0,s.jsxs)("div",{className:"my-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(a.S,{id:"unread-only",checked:t,onCheckedChange:e=>r(!!e)}),(0,s.jsx)(l.J,{htmlFor:"unread-only",children:"Chỉ hiển thị chưa đọc"})]}),(0,s.jsxs)(d.l6,{value:p,onValueChange:f,children:[(0,s.jsx)(d.bq,{className:"w-full md:w-[180px]",children:(0,s.jsx)(d.yv,{placeholder:"Lọc theo thời gian"})}),(0,s.jsxs)(d.gC,{children:[(0,s.jsx)(d.eb,{value:"all",children:"Tất cả"}),(0,s.jsx)(d.eb,{value:"today",children:"H\xf4m nay"}),(0,s.jsx)(d.eb,{value:"week",children:"7 ng\xe0y qua"}),(0,s.jsx)(d.eb,{value:"month",children:"Th\xe1ng n\xe0y"})]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:k?(0,s.jsx)("p",{className:"py-4 text-center text-muted-foreground",children:"Đang tải th\xf4ng b\xe1o..."}):w?(0,s.jsx)("p",{className:"py-4 text-center text-destructive",children:w}):P.length>0?P.map(e=>(0,s.jsxs)("div",{className:(0,c.cn)("rounded-lg border p-3 transition-colors hover:bg-muted/50",!e.read&&"border-l-4 border-l-primary"),children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("h3",{className:"font-medium",children:e.title}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.time})]}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:m(e.content,40)}),(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>q(e),children:"Xem chi tiết"})})]},e.id)):(0,s.jsx)("p",{className:"py-4 text-center text-muted-foreground",children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o n\xe0o"})}),(0,s.jsx)(u.lG,{open:!!b,onOpenChange:e=>!e&&g(null),children:(0,s.jsxs)(u.Cf,{className:"sm:max-w-md max-h-[80vh] overflow-hidden flex flex-col",children:[(0,s.jsx)(u.c7,{children:(0,s.jsx)(u.L3,{children:b?.title})}),(0,s.jsxs)("div",{className:"space-y-4 overflow-y-auto pr-1 flex-grow",children:[(0,s.jsx)("p",{className:"break-words",children:b?.fullContent}),(0,s.jsx)("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:(0,s.jsx)("span",{children:b?.time})})]}),(0,s.jsx)("div",{className:"mt-4 flex justify-end pt-2 border-t",children:(0,s.jsx)(u.HM,{asChild:!0,children:(0,s.jsx)(o.$,{children:"Đ\xf3ng"})})})]})})]})})}},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[318,436,291],()=>r(9105));module.exports=s})();