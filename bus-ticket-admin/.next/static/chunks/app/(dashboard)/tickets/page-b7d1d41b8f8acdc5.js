(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{1211:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),s=a(2115),n=a(7924),l=a(2657),i=a(7168),d=a(9852),o=a(8524),c=a(9840),u=a(8145),m=a(8482),h=a(7257);let f={paid:{label:"Đ\xe3 thanh to\xe1n",variant:"success"},pending:{label:"Đang chờ",variant:"warning"},failed:{label:"Thất bại",variant:"destructive"},SUCCEEDED:{label:"Th\xe0nh c\xf4ng",variant:"success"},WAITING_CASH:{label:"Chờ tiền mặt",variant:"warning"},WAITING_TRANSFER:{label:"Chờ chuyển khoản",variant:"warning"}},x={confirmed:{label:"Đ\xe3 x\xe1c nhận",variant:"success"},pending:{label:"Đang chờ",variant:"warning"},canceled:{label:"Đ\xe3 hủy",variant:"destructive"}};function p(){var e,t,a,p,v,g,b,j;let[N,y]=(0,s.useState)([]),[w,k]=(0,s.useState)(""),[S,T]=(0,s.useState)("all"),[C,A]=(0,s.useState)("all"),[R,E]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=w.trim()?"".concat((0,h.$_)(),"/api/staff/tickets/search?q=").concat(encodeURIComponent(w)):"".concat((0,h.$_)(),"/api/staff/tickets");y([]),fetch(e).then(e=>e.json()).then(e=>{if(!Array.isArray(e)){console.error("API response is not an array:",e);return}y(e.map(e=>({id:e.bookingCode,customerName:e.customerName,phone:e.phone,route:e.route,datetime:new Date(e.arrivalTime).toLocaleString("vi-VN"),seats:e.seatNumber,paymentStatus:e.paymentStatus,ticketStatus:e.ticketStatus})))}).catch(e=>console.error("Error fetching tickets:",e))},[w]);let _=N.filter(e=>("all"===S||e.paymentStatus===S)&&("all"===C||e.ticketStatus===C)),L=e=>{fetch("".concat((0,h.$_)(),"/api/staff/tickets/").concat(e)).then(e=>e.json()).then(e=>{E({id:e.bookingCode,customerName:e.customerName,phone:e.phone,route:e.route,datetime:new Date(e.arrivalTime).toLocaleString("vi-VN"),seats:e.seatNumber,paymentStatus:e.paymentStatus,ticketStatus:e.ticketStatus})})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Quản l\xfd v\xe9"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Xem v\xe0 quản l\xfd danh s\xe1ch v\xe9 đ\xe3 đặt"})]}),(0,r.jsx)(m.Zp,{children:(0,r.jsxs)(m.Wu,{className:"p-6",children:[(0,r.jsx)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:(0,r.jsxs)("div",{className:"flex w-full items-center gap-2 md:w-auto",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)(d.p,{placeholder:"T\xecm theo m\xe3 v\xe9 hoặc t\xean kh\xe1ch h\xe0ng...",value:w,onChange:e=>k(e.target.value),className:"w-full md:w-[300px]"})]})}),(0,r.jsx)("div",{className:"mt-6 overflow-x-auto rounded-md border",children:(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"M\xe3 đặt v\xe9"}),(0,r.jsx)(o.nd,{children:"T\xean KH"}),(0,r.jsx)(o.nd,{children:"SĐT"}),(0,r.jsx)(o.nd,{children:"Tuyến xe"}),(0,r.jsx)(o.nd,{children:"Ng\xe0y giờ"}),(0,r.jsx)(o.nd,{children:"Số ghế"}),(0,r.jsx)(o.nd,{children:"Thanh to\xe1n"}),(0,r.jsx)(o.nd,{children:"Trạng th\xe1i"}),(0,r.jsx)(o.nd,{className:"text-right",children:"Thao t\xe1c"})]})}),(0,r.jsx)(o.BF,{children:_.length>0?_.map((e,t)=>{var a,s,n,d,c,m,h,p;return(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nA,{className:"font-medium",children:e.id}),(0,r.jsx)(o.nA,{children:e.customerName}),(0,r.jsx)(o.nA,{children:e.phone}),(0,r.jsx)(o.nA,{children:e.route}),(0,r.jsx)(o.nA,{children:e.datetime}),(0,r.jsx)(o.nA,{children:e.seats}),(0,r.jsx)(o.nA,{children:(0,r.jsx)(u.E,{variant:null!==(c=null===(a=f[e.paymentStatus])||void 0===a?void 0:a.variant)&&void 0!==c?c:"secondary",children:null!==(m=null===(s=f[e.paymentStatus])||void 0===s?void 0:s.label)&&void 0!==m?m:e.paymentStatus})}),(0,r.jsx)(o.nA,{children:(0,r.jsx)(u.E,{variant:null!==(h=null===(n=x[e.ticketStatus])||void 0===n?void 0:n.variant)&&void 0!==h?h:"secondary",children:null!==(p=null===(d=x[e.ticketStatus])||void 0===d?void 0:d.label)&&void 0!==p?p:e.ticketStatus})}),(0,r.jsx)(o.nA,{className:"text-right",children:(0,r.jsxs)(i.$,{variant:"ghost",size:"icon",onClick:()=>L(e.id),children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Xem chi tiết"})]})})]},"".concat(e.id,"-").concat(t))}):(0,r.jsx)(o.Hj,{children:(0,r.jsx)(o.nA,{colSpan:9,className:"h-24 text-center",children:"Kh\xf4ng t\xecm thấy v\xe9 n\xe0o"})})})]})}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:["Tổng số v\xe9 hiển thị: ",_.length," / ",N.length]})]})}),(0,r.jsx)(c.lG,{open:!!R,onOpenChange:e=>!e&&E(null),children:(0,r.jsxs)(c.Cf,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(c.c7,{children:[(0,r.jsxs)(c.L3,{children:["Chi tiết v\xe9 #",null==R?void 0:R.id]}),(0,r.jsx)(c.rr,{children:"Th\xf4ng tin chi tiết về v\xe9 v\xe0 h\xe0nh kh\xe1ch"})]}),R&&(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"mb-2 font-medium",children:"Th\xf4ng tin h\xe0nh kh\xe1ch"}),(0,r.jsxs)("p",{className:"text-sm",children:["T\xean: ",R.customerName]}),(0,r.jsxs)("p",{className:"text-sm",children:["SĐT: ",R.phone]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"mb-2 font-medium",children:"Th\xf4ng tin v\xe9"}),(0,r.jsxs)("p",{className:"text-sm",children:["Tuyến: ",R.route]}),(0,r.jsxs)("p",{className:"text-sm",children:["Thời gian: ",R.datetime]}),(0,r.jsxs)("p",{className:"text-sm",children:["Số ghế: ",R.seats]})]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("h3",{className:"mb-2 font-medium",children:"Trạng th\xe1i"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Thanh to\xe1n:"}),(0,r.jsx)(u.E,{variant:null!==(v=null===(e=f[R.paymentStatus])||void 0===e?void 0:e.variant)&&void 0!==v?v:"secondary",children:null!==(g=null===(t=f[R.paymentStatus])||void 0===t?void 0:t.label)&&void 0!==g?g:R.paymentStatus})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"V\xe9:"}),(0,r.jsx)(u.E,{variant:null!==(b=null===(a=x[R.ticketStatus])||void 0===a?void 0:a.variant)&&void 0!==b?b:"secondary",children:null!==(j=null===(p=x[R.ticketStatus])||void 0===p?void 0:p.label)&&void 0!==j?j:R.ticketStatus})]})]})]})]})]})})]})}},1790:(e,t,a)=>{Promise.resolve().then(a.bind(a,1211))},2657:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(5155),s=a(2115),n=a(9708),l=a(2085),i=a(3999);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:s,size:l,className:a})),ref:t,...c})});o.displayName="Button"},7257:(e,t,a)=>{"use strict";a.d(t,{$_:()=>n});var r=function(e){return e.LOCAL="local",e.PRODUCTION="production",e.VERCEL="vercel",e.RENDER="render",e}({});let s=()=>"localhost"===window.location.hostname?"local":window.location.hostname.includes("onrender.com")?"render":window.location.hostname.includes("vercel.app")?"vercel":"production",n=()=>{let e=s();return e===r.LOCAL?"http://localhost:8080":(r.VERCEL,"https://bookingticketwebsite.onrender.com")}},7924:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8145:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(5155),s=a(2085),n=a(3999);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},8482:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>i,Zp:()=>l});var r=a(5155),s=a(2115),n=a(3999);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});i.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8524:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>l,nA:()=>u,nd:()=>c});var r=a(5155),s=a(2115),n=a(3999);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},9840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>f,HM:()=>c,L3:()=>x,c7:()=>h,lG:()=>d,rr:()=>p});var r=a(5155),s=a(2115),n=a(5452),l=a(4416),i=a(3999);let d=n.bL;n.l9;let o=n.ZL,c=n.bm,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=n.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(o,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});x.displayName=n.hE.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});p.displayName=n.VY.displayName},9852:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(5155),s=a(2115),n=a(3999);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[543,692,441,684,358],()=>t(1790)),_N_E=e.O()}]);